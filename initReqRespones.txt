from flask import Flask, jsonify
import json 

import requests
from requests.structures import CaseInsensitiveDict

app = Flask(__name__)

command = '''	curl -X GET --header 'Accept: application/json' 
				--header 'Authorization: key ttn-account-v2.8Kmm3rcp_YVL4u6j7EKxubrdxzPnt9oozHqmi8nDcvE'	
 				'https://besucherstromanalyse_hs.data.thethingsnetwork.org/api/v2/query?last=1h'
 		'''

@app.route('/query', methods=['GET']) 
def start():

	url = ('https://besucherstromanalyse_hs.data.thethingsnetwork.org/api/v2/query?last=1h')

	headers = CaseInsensitiveDict()
	headers["Accept"] = "application/json"
	headers["Authorization"] = "key ttn-account-v2.8Kmm3rcp_YVL4u6j7EKxubrdxzPnt9oozHqmi8nDcvE"

	resp = requests.get(url, headers=headers)
	print(resp)
	print(resp.content)

	
	
	return 'Hello {}'.format(resp.content)

if __name__ == '__main__':
    app.run(debug=True,port = 5000)